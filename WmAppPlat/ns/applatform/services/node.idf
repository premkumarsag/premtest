<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="shared">CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEFSRU5UX1BBQ0tBR0VfTkFNRSA9ICJX
bUFwcFBsYXQiOwogICAgLy8gIG1hbmlmZXN0IGRlcGVuZGVuY3kgQVBJIHJlcXVpcmVzICdwYXJl
bnQgcGFja2FnZSc7IGN1cnJlbnRseSBpZ25vcmVkCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBT
dHJpbmcgRFVNTVlfUEFSRU5UX1BBQ0tBR0VfTkFNRSA9ICJEZWZhdWx0IjsKCiAgICBwcml2YXRl
IHN0YXRpYyBTdHJpbmcgbmFtZUZyb21QaXBlKElEYXRhTWFwIGluUGlwZSkgewogICAgICAgIFN0
cmluZyBpZmNOYW1lID0gaW5QaXBlLmdldEFzU3RyaW5nKCJzZXJ2aWNlSW50ZXJmYWNlIiwgInNl
cnZpY2UucG9qby50ZXN0Iik7CiAgICAgICAgU3RyaW5nIHN2Y05hbWUgPSBpblBpcGUuZ2V0QXNT
dHJpbmcoInNlcnZpY2VOYW1lIiwgImNvbmNhdCIpOwogICAgICAgIHJldHVybiBpZmNOYW1lICsg
IjoiICsgc3ZjTmFtZTsKICAgIH0KCgogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCB1bnJlZ2lzdGVy
KFN0cmluZyBpblN2Y05hbWUsIFN0cmluZyBpblBrZ05hbWUsIFN0cmluZyBzeW1iTmFtZSwgU3Ry
aW5nIGJ1bmRsZVZlcnNpb24sIGJvb2xlYW4gZGVidWcpIHRocm93cyBFeGNlcHRpb24gewogICAg
CWVuc3VyZVBhY2thZ2VFeGlzdHMoaW5Qa2dOYW1lLCBkZWJ1Zyk7CiAgICAJaWYgKGRlYnVnKSBs
b2coU3RyaW5nLmZvcm1hdCgiR2V0dGluZyBzZXJ2aWNlIG5vZGUgJyVzJyBpbiBwYWNrYWdlICcl
cyciLGluU3ZjTmFtZSwgaW5Qa2dOYW1lKSk7CiAgICAgICAgT2JqZWN0IHN2Y05vZGUgPSBnZXRO
b2RlKGluU3ZjTmFtZSk7CiAgICAgICAgaWYgKCBzdmNOb2RlID09IG51bGwgKSB7CiAgICAgICAg
CWlmIChkZWJ1ZykgbG9nKFN0cmluZy5mb3JtYXQoIlNlcnZpY2Ugbm9kZSAnJXMnIGRvZXMgbm90
IGV4aXN0IiwgaW5TdmNOYW1lKSk7CiAgICAgICAgCXJldHVybjsKICAgICAgICB9CiAgICAJaWYg
KCBzaG91bGRSZW1vdmVTZXJ2aWNlQmluZGluZyhzdmNOb2RlLCBzeW1iTmFtZSwgYnVuZGxlVmVy
c2lvbiwgZGVidWcpICYmIHJlbW92ZVNlcnZpY2VOb2RlKHN2Y05vZGUsIGluU3ZjTmFtZSwgaW5Q
a2dOYW1lLCBkZWJ1ZykgKSB7CiAgICAgICAgICAgIAlQYWNrYWdlTWFuYWdlci5sb2FkUGFja2Fn
ZShpblBrZ05hbWUsIHRydWUsIGZhbHNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgIAlpZiAo
ZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJTZXJ2aWNlIG5vZGUgJyVzJyBub3QgcmVtb3ZlZCAi
LCBpblN2Y05hbWUpKTsKICAgICAgICB9CgogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGJvb2xl
YW4gc2hvdWxkUmVtb3ZlU2VydmljZUJpbmRpbmcoT2JqZWN0IHN2Y05vZGUsIFN0cmluZyBzeW1i
TmFtZSwgU3RyaW5nIGJ1bmRsZVZlcnNpb24sIGJvb2xlYW4gZGVidWcpIHsKICAgIAlpZiAoIHN2
Y05vZGUgaW5zdGFuY2VvZiBCYXNlU2VydmljZSkgewogICAgCQlJRGF0YSBzdmNEYXRhID0gKChC
YXNlU2VydmljZSlzdmNOb2RlKS5nZXRBc0RhdGEoKTsKICAgIAkJSURhdGFNYXAgc3ZjTWFwID0g
bmV3IElEYXRhTWFwKHN2Y0RhdGEpOwogICAgCQlJRGF0YU1hcCBtZXRhZGF0YU1hcCA9IHN2Y01h
cC5nZXRBc0lEYXRhTWFwKCJtZXRhZGF0YSIpOyAvL0NvbnN0YW50cy5LRVlfQVBfU1ZDX01FVEFE
QVRBCiAgICAJCWlmICggbWV0YWRhdGFNYXAgIT0gbnVsbCkgewogICAgCQkJU3RyaW5nIGNzclN5
bWJOYW1lID0gbWV0YWRhdGFNYXAuZ2V0QXNTdHJpbmcoIkJ1bmRsZS1TeW1ib2xpY05hbWUiKTsg
Ly9Db25zdGFudHMuS0VZX1NFUlZJQ0VfQlVORExFX1NZTUJPTElDX05BTUUKICAgIAkJCVN0cmlu
ZyBjc3JCdW5kbGVWZXJzaW9uID0gbWV0YWRhdGFNYXAuZ2V0QXNTdHJpbmcoIkJ1bmRsZS1WZXJz
aW9uIik7IC8vQ29uc3RhbnRzLktFWV9TRVJWSUNFX0JVTkRMRV9WRVJTSU9OCiAgICAJCQlpZiAo
ZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJjdXN0b21lciBidW5kbGU6ICVzLyVzLCBjbGllbnQt
YmluZGluZzogJXMvJXMiLAogICAgCQkJCQlzeW1iTmFtZSwgYnVuZGxlVmVyc2lvbiwgY3NyU3lt
Yk5hbWUsIGNzckJ1bmRsZVZlcnNpb24pKTsKICAgIAkJCS8vIGlmIHNlcnZpY2UgYmluZGluZyAo
Y3NyKSBoYXMgbm8gYnVuZGxlIHN5bWJvbGljIG5hbWUsIHJldHVybiB0cnVlLiBJdCdzIGEgcHJl
LTkuMTAgZ2VuZXJhdGVkIGJpbmRpbmcgdGhhdCBzaG91bGQgYmUgcmVjcmVhdGVkIGxhdGVyCiAg
ICAJCQkvLyAoUmUtZGVwbG95aW5nIGJ1bmRsZXMgaXMgcGFydCBvZiBvdXIgbWlncmF0aW9uIHN0
cmF0ZWd5KQogICAgCQkJLy8gT3RoZXJ3aXNlLCB0aGUgdmVyc2lvbiBhbmQgc3ltYm9saWMgbmFt
ZSBtdXN0IG1hdGNoCiAgICAJCQlyZXR1cm4gKCBjc3JTeW1iTmFtZSA9PSBudWxsIHx8ICggc3lt
Yk5hbWUuZXF1YWxzKGNzclN5bWJOYW1lKSAmJiBidW5kbGVWZXJzaW9uLmVxdWFscyhjc3JCdW5k
bGVWZXJzaW9uKSkgKTsKICAgIAkJfQoKICAgIAl9CiAgICAJcmV0dXJuIGZhbHNlOwogICAgfQoK
ICAgIHByaXZhdGUgc3RhdGljIHZvaWQgY3JlYXRlQW5kUmVnaXN0ZXIoU3RyaW5nIGluU3ZjTmFt
ZSwgU3RyaW5nIGluUGtnTmFtZSwgSURhdGEgaW5NZXRhRGF0YSwgYm9vbGVhbiBkZWJ1ZykgdGhy
b3dzIEV4Y2VwdGlvbiB7CiAgICAJZW5zdXJlUGFja2FnZUV4aXN0cyhpblBrZ05hbWUsIGRlYnVn
KTsKICAgIAlpZiAoZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJHZXR0aW5nIHNlcnZpY2Ugbm9k
ZSAnJXMnIGluIHBhY2thZ2UgJyVzJyIsaW5TdmNOYW1lLCBpblBrZ05hbWUpKTsKICAgICAgICBP
YmplY3Qgc3ZjTm9kZSA9IGdldE5vZGUoaW5TdmNOYW1lKTsKICAgICAgICBpZiAoIHN2Y05vZGUg
PT0gbnVsbCApIHsKICAgICAgICAJaWYgKGRlYnVnKSBsb2coU3RyaW5nLmZvcm1hdCgiQ3JlYXRp
bmcgc2VydmljZSBub2RlICclcycgaW4gcGFja2FnZSAnJXMnIiwgaW5TdmNOYW1lLCBpblBrZ05h
bWUpKTsKICAgICAgICAgICAgY3JlYXRlTmV3U2VydmljZU5vZGUoaW5TdmNOYW1lLCBpblBrZ05h
bWUsIGluTWV0YURhdGEsIGRlYnVnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAg
ICAgIHVwZGF0ZUV4aXN0aW5nU2VydmljZU5vZGUoc3ZjTm9kZSwgaW5TdmNOYW1lLCBpblBrZ05h
bWUsIGluTWV0YURhdGEsIGRlYnVnKTsKICAgICAgICB9CiAgICAJUGFja2FnZU1hbmFnZXIubG9h
ZFBhY2thZ2UoaW5Qa2dOYW1lLCB0cnVlLCBmYWxzZSk7CiAgICB9CgogICAgLyoqIFZlcmlmeSB0
aGUgY3VzdG9tZXIgcGFja2FnZSBleGlzdHMgKi8KICAgIHByaXZhdGUgc3RhdGljIHZvaWQgZW5z
dXJlUGFja2FnZUV4aXN0cyhTdHJpbmcgaW5Qa2dOYW1lLCBib29sZWFuIGRlYnVnKSB0aHJvd3Mg
RXhjZXB0aW9uIHsKICAgICAgICBQYWNrYWdlIHJldHVyblBrZyA9IFBhY2thZ2VNYW5hZ2VyLmdl
dFBhY2thZ2UoaW5Qa2dOYW1lKTsKICAgICAgICBpZiAoIHJldHVyblBrZyA9PSBudWxsICkgewog
ICAgICAgICAgICBtYWtlUGFja2FnZShpblBrZ05hbWUsIGRlYnVnKTsKICAgICAgICAgICAgcmV0
dXJuUGtnID0gUGFja2FnZU1hbmFnZXIuZ2V0UGFja2FnZShpblBrZ05hbWUpOwogICAgICAgIH0K
ICAgICAgICBhZGRBcHBQbGF0RGVwZW5kZW5jeShyZXR1cm5Qa2csIERVTU1ZX1BBUkVOVF9QQUNL
QUdFX05BTUUsIFBBUkVOVF9QQUNLQUdFX05BTUUsIGdldEdhdGV3YXlQYWNrYWdlVmVyc2lvbigp
LCBkZWJ1Zyk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBtYWtlUGFja2FnZShTdHJp
bmcgaW5OYW1lLCBib29sZWFuIGRlYnVnKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBJRGF0
YU1hcCBwaXBlTWFwID0gbmV3IElEYXRhTWFwKCk7CiAgICAgICAgcGlwZU1hcC5wdXQoInBhY2th
Z2UiLCBpbk5hbWUpOwogICAgICAgIElEYXRhTWFwIHJlc3VsdE1hcCA9IG5ldyBJRGF0YU1hcCgp
OwoKICAgIAlpZiAoZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJDcmVhdGluZyBwYWNrYWdlOiAl
cyIsaW5OYW1lKSk7CiAgICAgICAgSURhdGEgcmVzdWx0RGF0YSA9IFNlcnZpY2UuZG9JbnZva2Uo
U2VydmVySWYuSUZDX1BBQ0tBR0VTLCAicGFja2FnZUNyZWF0ZSIsIHBpcGVNYXAuZ2V0SURhdGEo
KSk7CiAgICAgICAgcmVzdWx0TWFwID0gbmV3IElEYXRhTWFwKHJlc3VsdERhdGEpOwogICAgICAg
IGludCByYyA9IHJlc3VsdE1hcC5nZXRBc0ludGVnZXIoImNvZGUiKTsKICAgICAgICBTdHJpbmcg
bWVzc2FnZSA9IHJlc3VsdE1hcC5nZXRBc1N0cmluZygibWVzc2FnZSIpOwogICAgICAgIGlmICgg
cmMgPT0gU2VydmVySWYuUEtHX1NFUlZJQ0VfU1VDQ0VTU19DT0RFICkgewogICAgICAgICAgICBw
aXBlTWFwID0gbmV3IElEYXRhTWFwKCk7CiAgICAgICAgICAgIHBpcGVNYXAucHV0KCJwYWNrYWdl
IiwgaW5OYW1lKTsKICAgICAgICAgICAgbG9nKFN0cmluZy5mb3JtYXQoIkFjdGl2YXRpbmcgcGFj
a2FnZTogJXMiLGluTmFtZSkpOwogICAgICAgICAgICByZXN1bHREYXRhID0gU2VydmljZS5kb0lu
dm9rZShTZXJ2ZXJJZi5JRkNfUEFDS0FHRVMsICJwYWNrYWdlQWN0aXZhdGUiLCBwaXBlTWFwLmdl
dElEYXRhKCkpOwogICAgICAgICAgICByZXN1bHRNYXAgPSBuZXcgSURhdGFNYXAocmVzdWx0RGF0
YSk7CiAgICAgICAgICAgIHJjID0gcmVzdWx0TWFwLmdldEFzSW50ZWdlcigiY29kZSIpOwogICAg
ICAgICAgICBpZiAoIHJjICE9IFNlcnZlcklmLlBLR19TRVJWSUNFX1NVQ0NFU1NfQ09ERSkgewog
ICAgICAgICAgICAJdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oIFN0cmluZy5mb3JtYXQoICIl
czolcyBmb3IgJXMgY29kZSglcykuICAlcyIsCiAgICAgICAgICAJCQkgIFNlcnZlcklmLklGQ19Q
QUNLQUdFUywicGFja2FnZUFjdGl2YXRlIixpbk5hbWUsIHJjLCBtZXNzYWdlKSk7CiAgICAgICAg
ICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgIAl0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlv
biggU3RyaW5nLmZvcm1hdCggIiVzOiVzIGZvciAlcyBjb2RlKCVzKS4gICVzIiwKICAgICAgICAJ
CQkgIFNlcnZlcklmLklGQ19QQUNLQUdFUywicGFja2FnZUNyZWF0ZSIsaW5OYW1lLCByYywgbWVz
c2FnZSkpOwogICAgICAgIH0KCiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBhZGRBcHBQ
bGF0RGVwZW5kZW5jeShQYWNrYWdlIGluUGtnLCBTdHJpbmcgaW5QYXJlbnREdW1teU5hbWUsIFN0
cmluZyBpblBhcmVudFBhY2thZ2VOYW1lLAogICAgCQkgICAgIFN0cmluZyBpblBhcmVudFZlcnNp
b24sIGJvb2xlYW4gZGVidWcpIHsKICAgICAgICBNYW5pZmVzdCBtYW5pID0gaW5Qa2cuZ2V0TWFu
aWZlc3QoKTsKICAgICAgICBTdHJpbmdbXSByZXF1aXJlcyA9IG1hbmkuZ2V0UmVxdWlyZXNBc1N0
cigpOwogICAgICAgIGJvb2xlYW4gdXBkYXRlID0gdHJ1ZTsKICAgICAgICBpZiAoIHJlcXVpcmVz
ICE9IG51bGwgKSB7CiAgICAgICAgCWZvciAoIFN0cmluZyByZXF1aXJlIDogcmVxdWlyZXMgKSB7
CiAgICAgICAgCQlpZiAoIHJlcXVpcmUuc3RhcnRzV2l0aCggUEFSRU5UX1BBQ0tBR0VfTkFNRSkg
KSB7CiAgICAgICAgCQkJdXBkYXRlID0gIXJlcXVpcmUuZXF1YWxzKGdldEdhdGV3YXlQYWNrYWdl
VmVyc2lvbigpKTsKICAgICAgICAJCQlpZiAoIHVwZGF0ZSkgewogICAgICAgIAkJCQlpZiAoZGVi
dWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJhZGRBcHBQbGF0RGVwZW5kZW5jeSgpIHJlbW92aW5nIG91
dGRhdGVkICclcycgZGVwZW5kZW5jeSBmcm9tIHBhY2thZ2UgJyVzJyIsIHJlcXVpcmUsIGluUGtn
LmdldE5hbWUoKSkpOwoJICAgICAgICAJCQltYW5pLmRlbERlcGVuZGVuY3koIHJlcXVpcmUgKTsK
CSAgICAgICAgCSAgICAgICAgYnJlYWs7CiAgICAgICAgCQkJfQogICAgICAgIAkJfQogICAgICAg
IAl9CiAgICAgICAgfQogICAgICAgIGlmICggdXBkYXRlKSB7CgkJCVN0cmluZ0J1ZmZlciBtc2dC
dWZmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwoJICAgICAgICBtYW5pLmFkZERlcGVuZGVuY3koaW5Q
YXJlbnREdW1teU5hbWUsIGdldEdhdGV3YXlQYWNrYWdlVmVyc2lvbigpLCBtc2dCdWZmKTsKCSAg
ICAgICAgaWYgKGRlYnVnKSBsb2coU3RyaW5nLmZvcm1hdCgiYWRkQXBwUGxhdERlcGVuZGVuY3ko
KSBhcHBseWluZyAnJXMnIGRlcGVuZGVuY3kgdG8gcGFja2FnZSAnJXMnLiBEZXRhaWxzOiAlcyIs
IGdldEdhdGV3YXlQYWNrYWdlVmVyc2lvbigpLCBpblBrZy5nZXROYW1lKCksIG1zZ0J1ZmYudG9T
dHJpbmcoKSkpOwoKCSAgICAgICAgUGFja2FnZU1hbmFnZXIuc2F2ZVBhY2thZ2VDb25maWd1cmF0
aW9uKGluUGtnKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBjcmVh
dGVOZXdTZXJ2aWNlTm9kZShTdHJpbmcgaW5TdmNOYW1lLCBTdHJpbmcgaW5Qa2dOYW1lLCBJRGF0
YSBpbk1ldGFEYXRhLCBib29sZWFuIGRlYnVnKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBn
dWFyYW50ZWVJbnRlcmZhY2VQYXRoKGluUGtnTmFtZSwgaW5TdmNOYW1lKTsKICAgICAgICBJRGF0
YU1hcCBwaXBlTWFwID0gbmV3IElEYXRhTWFwKCk7CiAgICAgICAgYWRkU2VydmljZURldGFpbHMo
cGlwZU1hcCwgaW5TdmNOYW1lLCBpblBrZ05hbWUsIGluTWV0YURhdGEpOwogICAgICAgIGlmIChk
ZWJ1ZykgbG9nKFN0cmluZy5mb3JtYXQoIm1ha2VOb2RlICVzIGFuZCBhZGQgdG8gcGFja2FnZSAl
cyIsaW5TdmNOYW1lLCBpblBrZ05hbWUpKTsKICAgICAgICBTZXJ2aWNlLmRvSW52b2tlKFNlcnZl
cklmLklGQ19OUywgIm1ha2VOb2RlIiwgcGlwZU1hcC5nZXRJRGF0YSgpKTsKICAgICAgICBOU05h
bWUgbmFtZSA9IE5TTmFtZS5jcmVhdGUoaW5TdmNOYW1lKTsKICAgICAgICBQYWNrYWdlIHBrZyA9
IFBhY2thZ2VNYW5hZ2VyLmdldFBhY2thZ2UoaW5Qa2dOYW1lKTsKICAgICAgICBwa2cuZ2V0U3Rv
cmUoKS5hZGRUb05vZGUobmFtZSwgUGFja2FnZVN0b3JlLk5ERl9GSUxFLCBwaXBlTWFwLmdldElE
YXRhKCkpOwoKICAgICAgICBTdHJpbmcgeEFjbCA9IGdldEV4ZWN1dGVBQ0xGcm9tQW5ub3RhdGlv
bk1ldGFkYXRhKGluU3ZjTmFtZSwgbmV3IElEYXRhTWFwKGluTWV0YURhdGEpLCBkZWJ1Zyk7CiAg
ICAgICAgaWYgKCB4QWNsID09IG51bGwpIHsKICAgICAgICAgIGlmIChkZWJ1ZykgbG9nKFN0cmlu
Zy5mb3JtYXQoIm5vIG92ZXJyaWRlIGV4ZWN1dGUgQUNMIHNwZWNpZmllZCBmb3IgJXMiLCBpblN2
Y05hbWUpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgU3RyaW5nIHJNc2cgPSB1cGRhdGVB
Q0xzRm9yU2VydmljZSggaW5TdmNOYW1lLAogICAgICAgICAgCQlBQ0xNYW5hZ2VyLldFQk1fREVW
RUxPUEVSU19BQ0wsIC8vQUNMTWFuYWdlci5XRUJNX0FETUlOSVNUUkFUT1JTX0FDTCwgIC8vIGJy
b3dzZQogICAgICAgICAgCQl4QWNsLCAgLy8gZXhlY3V0ZQogICAgICAgICAgCQludWxsLCAvKkFD
TE1hbmFnZXIuV0VCTV9JTlRFUk5BTERFVl9BQ0wsKi8gLy8gcmVhZAogICAgICAgICAgCQludWxs
LCAvKkFDTE1hbmFnZXIuV0VCTV9JTlRFUk5BTERFVl9BQ0wsKi8gLy8gd3JpdGUKICAgICAgICAg
IAkJZGVidWcpOwogICAgICAgIH0KICAgICAgICBQYWNrYWdlTWFuYWdlci5sb2FkUGFja2FnZVBh
cnRpYWwoaW5Qa2dOYW1lLCBuZXcgTlNOYW1lW10geyBuYW1lIH0pOwoKICAgIH0KCiAgICAvKioK
ICAgICAqIEdldCB0aGUgZXhlY3V0ZSBBQ0wKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgU3Ry
aW5nIGdldEV4ZWN1dGVBQ0xGcm9tQW5ub3RhdGlvbk1ldGFkYXRhKFN0cmluZyBzZXJ2aWNlTmFt
ZSwgSURhdGFNYXAgbWV0YWRhdGFNYXAsIGJvb2xlYW4gZGVidWcpIHsKCiAgICAJU3RyaW5nIHhB
Y2wgPSBudWxsOwogICAgICBTdHJpbmcgYWNsID0gbWV0YWRhdGFNYXAuZ2V0QXNTdHJpbmcoImV4
ZWN1dGVBY2wiKTsgLy9Db25zdGFudHMuS0VZX1NFUlZJQ0VfRVhFQ1VURV9BQ0wKICAgIAlpZiAo
IGFjbCAhPSBudWxsICYmIEFDTE1hbmFnZXIuZ2V0R3JvdXAoYWNsKSAhPSBudWxsKSB7CiAgCQkJ
CXhBY2wgPSBhY2w7CiAgICAJfQoKICAJCWlmICggeEFjbCA9PSBudWxsICYmIGRlYnVnICkgewog
IAkJCWxvZyhTdHJpbmcuZm9ybWF0KCJOTyBBQ0wgZXhpc3RzIGZvciBzcGVjaWZpZWQgQEFjbEFs
bG93ZWQgc2VydmljZSBhbm5vdGF0aW9uOiAgJXMiLCBhY2wpKTsKICAgICAgICBsb2coU3RyaW5n
LmZvcm1hdCgiU2VydmljZSAlcyBleGVjdXRlIEFDTCB3aWxsIGJlIGluaGVyaXRlZC4iLCBzZXJ2
aWNlTmFtZSkpOwogIAkJfQogICAgCXJldHVybiB4QWNsOwogICAgfQoKICAgIC8qKgogICAgICog
VXBkYXRlcyB0aGUgQUNMIGZvciB0aGUgc3BlY2lmaWVkIHNlcnZpY2UKICAgICAqIE51bGwgdmFs
dWVzIGltcGx5IGludGVudCB0byByZXNldCBiYWNrIHRvIHRoZSAnSW5oZXJpdGVkJyBkZWZhdWx0
IGJlaGF2aW9yIGZvciB0aGUgc2VydmljZQogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBTdHJp
bmcgdXBkYXRlQUNMc0ZvclNlcnZpY2UoU3RyaW5nIHN2Y05hbWUsIFN0cmluZyBicm93c2VBY2ws
IFN0cmluZyB4QWNsLCBTdHJpbmcgckFjbCwgU3RyaW5nIHdBY2wsIGJvb2xlYW4gZGVidWcpIHRo
cm93cyBFeGNlcHRpb24gewoKICAgIAlTdHJpbmcgck1zZyA9IG51bGw7CiAgICAJSURhdGEgZ2V0
Tm9kZU91dHB1dCA9IG51bGw7CiAgICAJSURhdGFNYXAgcmVzdWx0TWFwID0gbnVsbDsKCiAgICAJ
SURhdGFNYXAgc2VydmljZU1hcCA9IGdldFNlcnZpY2VJbmZvKHN2Y05hbWUpOwogICAgCVN0cmlu
ZyBvcmlnQnJvd3NlQWNsID0gIHNlcnZpY2VNYXAuZ2V0QXNTdHJpbmcoU2VydmVySWYuR0VUX1NW
Q0lORk9fQlJPV1NFQUNMR1JPVVApOwogICAgCVN0cmluZyBvcmlnUmVhZEFjbCA9ICBzZXJ2aWNl
TWFwLmdldEFzU3RyaW5nKFNlcnZlcklmLkdFVF9TVkNJTkZPX1JFQURBQ0xHUk9VUCk7CiAgICAJ
U3RyaW5nIG9yaWdXcml0ZUFjbCA9ICBzZXJ2aWNlTWFwLmdldEFzU3RyaW5nKFNlcnZlcklmLkdF
VF9TVkNJTkZPX1dSSVRFQUNMR1JPVVApOwogICAgCVN0cmluZyBvcmlnRXhlY3V0ZUFjbCA9ICBz
ZXJ2aWNlTWFwLmdldEFzU3RyaW5nKFNlcnZlcklmLkdFVF9TVkNJTkZPX0FDTEdST1VQKTsKCiAg
ICAJQXJyYXlMaXN0PFN0cmluZz4gY2hhbmdlcyA9IG5ldyBBcnJheUxpc3Q8PigpOwogICAgCWlm
ICggIWFjbENoYW5nZWQoIG9yaWdCcm93c2VBY2wsIGJyb3dzZUFjbCwgY2hhbmdlcyApKSB7CiAg
ICAJCWJyb3dzZUFjbCA9IG9yaWdCcm93c2VBY2w7CiAgICAJfQogICAgCWlmICggIWFjbENoYW5n
ZWQoIG9yaWdSZWFkQWNsLCByQWNsLCBjaGFuZ2VzICkpIHsKICAgIAkJckFjbCA9IG9yaWdSZWFk
QWNsOwogICAgCX0KICAgIAlpZiAoICFhY2xDaGFuZ2VkKCBvcmlnV3JpdGVBY2wsIHdBY2wsIGNo
YW5nZXMgKSkgewogICAgCQl3QWNsID0gb3JpZ1dyaXRlQWNsOwogICAgCX0KICAgIAlpZiAoICFh
Y2xDaGFuZ2VkKCBvcmlnRXhlY3V0ZUFjbCwgeEFjbCwgY2hhbmdlcyApKSB7CiAgICAJCXhBY2wg
PSBvcmlnRXhlY3V0ZUFjbDsKICAgIAl9CgogICAgCWlmICggY2hhbmdlcy5zaXplKCkgPiAwICkg
ewoKICAgIAkJSURhdGFNYXAgcGlwZU1hcCA9IHNlcnZpY2VNYXA7CgoJICAgICAgICBwaXBlTWFw
LnB1dChTZXJ2ZXJJZi5TRVRfU1ZDSU5GT19TRVJWSUNFLCBzdmNOYW1lKTsKCSAgICAgICAgcGlw
ZU1hcC5wdXQoU2VydmVySWYuU0VUX1NWQ0lORk9fQUNMR1JPVVAsIHhBY2wpOwoKCSAgICAgICAg
Ly8gZW5mb3JjZSBldmVuIGlmIGl0J3Mgbm90IGEgdG9wIGxldmVsIHNlcnZpY2UKCSAgICAgICAg
Ly8gcGlwZU1hcC5wdXQoU2VydmVySWYuU0VUX1NWQ0lORk9fSU5URVJOQUxfQUNMX0NIRUNLLCAi
dHJ1ZSIpOwoJICAgICAgICBwaXBlTWFwLnB1dChTZXJ2ZXJJZi5TRVRfU1ZDSU5GT19XUklURUFD
TEdST1VQLCB3QWNsKTsKCSAgICAgICAgcGlwZU1hcC5wdXQoU2VydmVySWYuU0VUX1NWQ0lORk9f
UkVBREFDTEdST1VQLCByQWNsKTsKCSAgICAgICAgcGlwZU1hcC5wdXQoU2VydmVySWYuU0VUX1NW
Q0lORk9fQlJPV1NFQUNMR1JPVVAsIGJyb3dzZUFjbCk7CgoJICAgICAgICBnZXROb2RlT3V0cHV0
ID0gU2VydmljZS5kb0ludm9rZShTZXJ2ZXJJZi5JRkNfU0VSVklDRVMsIFNlcnZlcklmLlNWQ19T
RVRfU0VSVklDRV9JTkZPLCBwaXBlTWFwLmdldElEYXRhKCkpOwoJICAgICAgICByZXN1bHRNYXAg
PSBuZXcgSURhdGFNYXAoZ2V0Tm9kZU91dHB1dCk7CgkgICAgICAgIHJNc2cgPSByZXN1bHRNYXAu
Z2V0QXNTdHJpbmcoIm1lc3NhZ2UiKTsKCSAgICAgICAgaWYgKCByTXNnICE9IG51bGwgJiYgck1z
Zy5zdGFydHNXaXRoKCJjb20ud20uYXBwLmIyYi5zZXJ2ZXIuU2VydmljZUV4Y2VwdGlvbiIpKSB0
aHJvdyBuZXcgU2VydmljZUV4Y2VwdGlvbihyTXNnKTsKCgkgICAgICAgIGlmIChkZWJ1ZykgbG9n
KFN0cmluZy5mb3JtYXQoIkFDTCB1cGRhdGU6IGJyb3dzZSglcyksIGV4ZWN1dGUoJXMpLCByZWFk
KCVzKSwgd3JpdGUoJXMpLiAgJ2FjbEFzc2lnbicgcmVzcG9uc2UgbXNnOiAlcyIsCgkgICAgICAg
IAkJYnJvd3NlQWNsLCB4QWNsLCByQWNsLCB3QWNsLCByTXNnKSk7CiAgICAJfQogICAgICAgIHJl
dHVybiByTXNnOwoKCiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBhY2xDaGFuZ2Vk
KFN0cmluZyBvcmlnQWNsLCBTdHJpbmcgbmV3QWNsLCBBcnJheUxpc3Q8U3RyaW5nPiBjaGFuZ2Vz
KSB7CiAgICAJYm9vbGVhbiBjaGFuZ2VkID0gZmFsc2U7CiAgICAJaWYgKCAiRGVmYXVsdCIuZXF1
YWxzKG9yaWdBY2wpKSB7CiAgICAJCW9yaWdBY2wgPSBudWxsOwogICAgCX0KICAgIAlpZiAoIG9y
aWdBY2wgPT0gbnVsbCApIHsKICAgIAkJaWYgKG5ld0FjbCAhPSBudWxsKSB7CiAgICAJCQljaGFu
Z2VkID0gdHJ1ZTsKCiAgICAJCX0KICAgIAl9IGVsc2UgewogICAgCQljaGFuZ2VkID0gIShvcmln
QWNsLmVxdWFscyhuZXdBY2wpKTsKICAgIAl9CiAgICAJaWYgKCBjaGFuZ2VkICkgewogICAgCQlj
aGFuZ2VzLmFkZCggU3RyaW5nLmZvcm1hdCgiJXMtPiVzIixvcmlnQWNsLG5ld0FjbCkpOwogICAg
CX0KICAgIAlyZXR1cm4gY2hhbmdlZDsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBJRGF0YU1h
cCBnZXRTZXJ2aWNlSW5mbyhTdHJpbmcgc3ZjTmFtZSkgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAg
CUlEYXRhTWFwIHBpcGVNYXAgPSBuZXcgSURhdGFNYXAoKTsKICAgIAlwaXBlTWFwLnB1dChTZXJ2
ZXJJZi5HRVRfU1ZDSU5GT19TRVJWSUNFLCBzdmNOYW1lKTsKICAgIAlJRGF0YSByZXN1bHQgPSBT
ZXJ2aWNlLmRvSW52b2tlKFNlcnZlcklmLklGQ19TRVJWSUNFUywgU2VydmVySWYuU1ZDX0dFVF9T
RVJWSUNFX0lORk8sIHBpcGVNYXAuZ2V0SURhdGEoKSk7CiAgICAJcmV0dXJuIG5ldyBJRGF0YU1h
cChyZXN1bHQpOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQgdXBkYXRlRXhpc3RpbmdT
ZXJ2aWNlTm9kZShPYmplY3QgaW5TdmNOb2RlLCBTdHJpbmcgaW5TdmNOYW1lLCBTdHJpbmcgaW5Q
a2dOYW1lLCBJRGF0YSBpbk1ldGFEYXRhLAogICAgCQkgICBib29sZWFuIGRlYnVnKSB0aHJvd3Mg
RXhjZXB0aW9uIHsKICAgICAgICBpZiAoIGluU3ZjTm9kZSBpbnN0YW5jZW9mIE5TTm9kZSApIHsK
ICAgICAgICAJaWYgKGRlYnVnKSBsb2coU3RyaW5nLmZvcm1hdCgidXBkYXRlRXhpc3RpbmdTZXJ2
aWNlTm9kZSgpIC1kZWxldGluZyBub2RlICclcycgaW4gcGFja2FnZSAnJXMnIiwgaW5TdmNOYW1l
LCBpblBrZ05hbWUpKTsKICAgICAgICAJZGVsZXRlTm9kZShpblBrZ05hbWUsIGluU3ZjTmFtZSk7
CiAgICAgICAgCWlmIChkZWJ1ZykgbG9nKFN0cmluZy5mb3JtYXQoInVwZGF0ZUV4aXN0aW5nU2Vy
dmljZU5vZGUoKSAtY3JlYXRpbmcgbm9kZSAnJXMnIGluIHBhY2thZ2UgJyVzJyIsIGluU3ZjTmFt
ZSwgaW5Qa2dOYW1lKSk7CiAgICAgICAgICAgIGNyZWF0ZU5ld1NlcnZpY2VOb2RlKGluU3ZjTmFt
ZSwgaW5Qa2dOYW1lLCBpbk1ldGFEYXRhLCBkZWJ1Zyk7CiAgICAgICAgfQogICAgICAgIGVsc2Ug
ewogICAgICAgIAlpZiAoZGVidWcpIGxvZyhTdHJpbmcuZm9ybWF0KCJ1cGRhdGVFeGlzdGluZ1Nl
cnZpY2VOb2RlKCkgLSBmb3VuZCBhIG5vZGUgdGhhdCdzIG5vdCBhIE5TTm9kZTogIiwgaW5TdmNO
b2RlKSk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4gcmVtb3Zl
U2VydmljZU5vZGUoT2JqZWN0IGluU3ZjTm9kZSwgU3RyaW5nIGluU3ZjTmFtZSwgU3RyaW5nIGlu
UGtnTmFtZSwgYm9vbGVhbiBkZWJ1ZykgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCBp
blN2Y05vZGUgaW5zdGFuY2VvZiBPc2dpU2VydmljZSApIHsKCiAgICAgICAgCUlEYXRhIGRhdGEg
PSAoKE9zZ2lTZXJ2aWNlKWluU3ZjTm9kZSkuZ2V0QXNEYXRhKCk7CiAgICAgICAgCUlEYXRhTWFw
IG1hcERhdGEgPSBuZXcgSURhdGFNYXAoZGF0YSk7CiAgICAgICAgCUlEYXRhTWFwIG1ldGFkYXRh
TWFwID0gbWFwRGF0YS5nZXRBc0lEYXRhTWFwKE9zZ2lTZXJ2aWNlLk1FVEFEQVRBX0tFWSk7CiAg
ICAgICAgCS8vIGRlbGV0ZSdzIEFDTHMgdG9vCiAgICAgICAgCWRlbGV0ZU5vZGUoaW5Qa2dOYW1l
LCBpblN2Y05hbWUpOwogICAgICAgIAlyZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0
dXJuIGZhbHNlOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQgZ3VhcmFudGVlSW50ZXJm
YWNlUGF0aChTdHJpbmcgaW5Qa2dOYW1lLCBTdHJpbmcgaW5TdmNOYW1lKSB0aHJvd3MgRXhjZXB0
aW9uIHsKICAgICAgICBQYWNrYWdlIHBrZyA9IFBhY2thZ2VNYW5hZ2VyLmdldFBhY2thZ2UoaW5Q
a2dOYW1lKTsKICAgICAgICBOU05hbWUgbmFtZSA9IE5TTmFtZS5jcmVhdGUoaW5TdmNOYW1lKTsK
ICAgICAgICAvLyAgZmlyc3QsIG1ha2Ugc3VyZSBkaXJlY3RvcmllcyBleGlzdCBpbiB0aGUgZmls
ZSBzeXN0ZW0KICAgICAgICBwa2cuZ2V0U3RvcmUoKS5nZXROb2RlUGF0aChuYW1lKS5ta2RpcnMo
KTsKICAgICAgICAvLyAgdGhlbiwgbWFrZSBzdXJlIGludGVyZmFjZSBub2RlcyBleGlzdCBpbiB0
aGUgbmFtZXNwYWNlIGZvciBlYWNoIGRpcmVjdG9yeQogICAgICAgIE5hbWVbXSBuc1BhdGggPSBu
YW1lLmdldEludGVyZmFjZVBhdGgoKTsKICAgICAgICBTdHJpbmcgbm9kZU5hbWUgPSAiIjsKICAg
ICAgICBmb3IgKCBOYW1lIG5leHRQYXRoRWxlbSA6IG5zUGF0aCApIHsKICAgICAgICAgICAgaWYg
KCBub2RlTmFtZS5pc0VtcHR5KCkgKSB7CiAgICAgICAgICAgICAgICBub2RlTmFtZSArPSBuZXh0
UGF0aEVsZW0udG9TdHJpbmcoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAg
ICAgICAgICAgICAgIG5vZGVOYW1lICs9ICIuIiArIG5leHRQYXRoRWxlbS50b1N0cmluZygpOwog
ICAgICAgICAgICB9CiAgICAgICAgICAgIE9iamVjdCBub2RlRGF0YSA9IGdldE5vZGUobm9kZU5h
bWUpOwogICAgICAgICAgICBpZiAoIG5vZGVEYXRhID09IG51bGwgKSB7CiAgICAgICAgICAgICAg
ICBub2RlRGF0YSA9IG1ha2VJbnRlcmZhY2VOb2RlKGluUGtnTmFtZSwgbm9kZU5hbWUpOwogICAg
ICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQgZGVsZXRl
Tm9kZShTdHJpbmcgaW5Qa2dOYW1lLCBTdHJpbmcgaW5Ob2RlTmFtZSkgdGhyb3dzIEV4Y2VwdGlv
biB7CiAgICAgICAgSURhdGFNYXAgcGlwZU1hcCA9IG5ldyBJRGF0YU1hcCgpOwogICAgICAgIHBp
cGVNYXAucHV0KE5TTm9kZS5LRVlfTlNOX05TTkFNRSwgaW5Ob2RlTmFtZSk7CiAgICAgICAgcGlw
ZU1hcC5wdXQoTlNOb2RlLktFWV9OU05fUEFDS0FHRSwgaW5Qa2dOYW1lKTsKICAgICAgICBTZXJ2
aWNlLmRvSW52b2tlKFNlcnZlcklmLklGQ19OUywgImRlbGV0ZU5vZGUiLCBwaXBlTWFwLmdldElE
YXRhKCkpOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIE9iamVjdCBnZXROb2RlKFN0cmluZyBp
bk5vZGVOYW1lKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgIAlyZXR1cm4gZ2V0Tm9kZVNlcnZpY2VJ
bnZva2UoaW5Ob2RlTmFtZSk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgT2JqZWN0IGdldE5v
ZGVTZXJ2aWNlSW52b2tlKFN0cmluZyBpbk5vZGVOYW1lKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg
ICAgICBJRGF0YU1hcCBwaXBlTWFwID0gbmV3IElEYXRhTWFwKCk7CiAgICAgICAgcGlwZU1hcC5w
dXQoIm5hbWUiLCBpbk5vZGVOYW1lKTsKICAgICAgICBJRGF0YSBnZXROb2RlT3V0cHV0ID0gU2Vy
dmljZS5kb0ludm9rZShTZXJ2ZXJJZi5JRkNfTlMsICJnZXROb2RlIiwgcGlwZU1hcC5nZXRJRGF0
YSgpKTsKICAgICAgICBJRGF0YU1hcCByZXN1bHRNYXAgPSBuZXcgSURhdGFNYXAoZ2V0Tm9kZU91
dHB1dCk7CiAgICAgICAgcmV0dXJuIHJlc3VsdE1hcC5nZXQoIm5vZGUiKTsKCiAgICB9CgogICAg
cHJpdmF0ZSBzdGF0aWMgT2JqZWN0IG1ha2VJbnRlcmZhY2VOb2RlKFN0cmluZyBpblBrZ05hbWUs
IFN0cmluZyBpbk5vZGVOYW1lKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBJRGF0YU1hcCBw
aXBlTWFwID0gbmV3IElEYXRhTWFwKCk7CiAgICAgICAgcGlwZU1hcC5wdXQoTlNOb2RlLktFWV9O
U05fTlNOQU1FLCBpbk5vZGVOYW1lKTsKICAgICAgICBwaXBlTWFwLnB1dChOU05vZGUuS0VZX05T
Tl9QQUNLQUdFLCBpblBrZ05hbWUpOwogICAgICAgIHBpcGVNYXAucHV0KE5TTm9kZS5LRVlfTlNO
X1RZUEUsIE5TSW50ZXJmYWNlLlRZUEUpOwogICAgICAgIElEYXRhIG1ha2VOb2RlT3V0cHV0ID0g
U2VydmljZS5kb0ludm9rZShTZXJ2ZXJJZi5JRkNfTlMsICJtYWtlTm9kZSIsIHBpcGVNYXAuZ2V0
SURhdGEoKSk7CiAgICAgICAgSURhdGFNYXAgcmVzdWx0TWFwID0gbmV3IElEYXRhTWFwKG1ha2VO
b2RlT3V0cHV0KTsKICAgICAgICByZXR1cm4gcmVzdWx0TWFwLmdldCgibm9kZSIpOwogICAgfQoK
ICAgIHByaXZhdGUgc3RhdGljIHZvaWQgYWRkU2VydmljZURldGFpbHMoSURhdGFNYXAgaW5NYXAs
IFN0cmluZyBpblN2Y05hbWUsIFN0cmluZyBpblBrZ05hbWUsIElEYXRhIGluTWV0YURhdGEpIHRo
cm93cyBFeGNlcHRpb24gewogICAgICAgIGluTWFwLnB1dChOU1NlcnZpY2UuS0VZX05TU19TSUcs
IG1ldGFkYXRhMlNpZ25hdHVyZShpbk1ldGFEYXRhKSk7CiAgICAgICAgaW5NYXAucHV0KE9zZ2lT
ZXJ2aWNlLk1FVEFEQVRBX0tFWSwgaW5NZXRhRGF0YSk7CiAgICAgICAgaW5NYXAucHV0KE5TTm9k
ZS5LRVlfTlNOX1BBQ0tBR0UsIGluUGtnTmFtZSk7CiAgICAgICAgaW5NYXAucHV0KE5TTm9kZS5L
RVlfTlNOX05TTkFNRSwgaW5TdmNOYW1lKTsKICAgICAgICBpbk1hcC5wdXQoImlzX3B1YmxpYyIs
IEJvb2xlYW4uVFJVRSk7CiAgICAgICAgaW5NYXAucHV0KE5TTm9kZS5LRVlfTlNOX1RZUEUsIE5T
U2VydmljZS5UWVBFX0tFWSk7CiAgICAgICAgaW5NYXAucHV0KE5TU2VydmljZS5LRVlfTlNTX1RZ
UEUsIE9zZ2lTZXJ2aWNlLk5TVFlQRSk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgT2JqZWN0
IG1ldGFkYXRhMlNpZ25hdHVyZShJRGF0YSBpbk1ldGFEYXRhKSB7CiAgICAgICAgTWV0aG9kTWV0
YWRhdGFJbXBsIG1ldGFkYXRhSW1wbCA9IG5ldyBNZXRob2RNZXRhZGF0YUltcGwoKTsKICAgICAg
ICBtZXRhZGF0YUltcGwuc2V0RnJvbURhdGEoaW5NZXRhRGF0YSk7CiAgICAgICAgTlNSZWNvcmQg
aW5TaWcgPSBNZXRhZGF0YTJTaWduYXR1cmVzLmNyZWF0ZUlucHV0U2lnKG1ldGFkYXRhSW1wbCk7
CiAgICAgICAgTlNSZWNvcmQgb3V0U2lnID0gTWV0YWRhdGEyU2lnbmF0dXJlcy5jcmVhdGVPdXRw
dXRTaWcobWV0YWRhdGFJbXBsKTsKICAgICAgICByZXR1cm4gbmV3IE5TU2lnbmF0dXJlKGluU2ln
LCBvdXRTaWcpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBmb3JtYXR0ZWQgcGFj
a2FnZSB2ZXJzaW9uIHN0cmluZyBmb3IgdGhlIFdtQXBwUGxhdCBwYWNrYWdlLgogICAgICovCiAg
ICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgZ2V0R2F0ZXdheVBhY2thZ2VWZXJzaW9uKCkgewogICAg
CWlmICggd21BcHBQbGF0VmVyc2lvbiA9PSBudWxsKSB7CiAgICAJCVN0cmluZyBwYWNrYWdlVmVy
c2lvbiA9IFBBUkVOVF9QQUNLQUdFX05BTUUrIjs5LjEwLjAiOwoJICAgIAl0cnkgewoJICAgIAkJ
UGFja2FnZSBwa2cgPSBQYWNrYWdlTWFuYWdlci5nZXRQYWNrYWdlKFBBUkVOVF9QQUNLQUdFX05B
TUUpOwoJICAgIAkJaWYgKCBwa2cgIT0gbnVsbCkgewoJICAgIAkJCXBhY2thZ2VWZXJzaW9uID0g
Zm9ybWF0dGVkUGFja2FnZU5hbWUoUEFSRU5UX1BBQ0tBR0VfTkFNRSwgcGtnLmdldFZlcnNpb24o
KSk7CgkgICAgCQl9CgkgICAgCX0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7IH0KCSAgICAJd21BcHBQ
bGF0VmVyc2lvbiA9IHBhY2thZ2VWZXJzaW9uOwogICAgCX0KCiAgICAJcmV0dXJuIHdtQXBwUGxh
dFZlcnNpb247CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBzdHJpbmcgdGhhdCBtZWV0
cyB0aGUgZXhwZWN0ZWQgZm9ybWF0IGZvciBhIHJlcXVpcmVkIElTIHBhY2thZ2UgZGVwZW5kZW5j
eSBhcyBpdCBleGlzdHMgaW4gdGhlIG1hbmlmZXN0LgogICAgICovCiAgICBwcml2YXRlIHN0YXRp
YyBTdHJpbmcgZm9ybWF0dGVkUGFja2FnZU5hbWUoU3RyaW5nIHBhY2thZ2VOYW1lLCBTdHJpbmcg
cmF3VmVyc2lvbikgewogICAgCVN0cmluZyB2ZXJzaW9uID0gcmF3VmVyc2lvbjsKICAgIAlpZiAo
IHJhd1ZlcnNpb24gIT0gbnVsbCkgewogICAgCQlTdHJpbmdbXSBwaWVjZXMgPSByYXdWZXJzaW9u
LnNwbGl0KCAiXFwuIik7CiAgICAJCVN0cmluZ0J1aWxkZXIgYnVpbGRlciA9IG5ldyBTdHJpbmdC
dWlsZGVyKCk7CiAgICAJCWZvciAoIGludCBpZHggPSAwOyBpZHggPCAzOyBpZHgrKykgewogICAg
CQkJaWYgKGlkeD4wKSBidWlsZGVyLmFwcGVuZCgnLicpOwogICAgCQkJYnVpbGRlci5hcHBlbmQo
cGllY2VzW2lkeF0udHJpbSgpKTsKICAgIAkJfQogICAgCQl2ZXJzaW9uID0gYnVpbGRlci50b1N0
cmluZygpOwogICAgCX0KICAgIAlyZXR1cm4gcGFja2FnZU5hbWUrIjsiK3ZlcnNpb247CiAgICB9
CgogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIGdldFJlcXVpcmVkU3RyaW5nKFN0cmluZyBrZXks
IElEYXRhTWFwIHBpcGVNYXApIHRocm93cyBTZXJ2aWNlRXhjZXB0aW9uIHsKICAgIAlTdHJpbmcg
dmFsdWUgPSBwaXBlTWFwLmdldEFzU3RyaW5nKGtleSk7CiAgICAJaWYgKCB2YWx1ZSA9PSBudWxs
IHx8IHZhbHVlLmxlbmd0aCgpID09IDApIHsKICAgIAkJU3RyaW5nIG1zZyA9IFN0cmluZy5mb3Jt
YXQoIiVzIGlzIHJlcXVpcmVkIGlucHV0IHBhcmFtZXRlciIsIGtleSk7CiAgICAJCXRocm93IG5l
dyBTZXJ2aWNlRXhjZXB0aW9uKG1zZyk7CiAgICAJfQogICAgCXJldHVybiB2YWx1ZTsKICAgIH0K
CiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGxvZyggU3RyaW5nIG1lc3NhZ2UpIHsKICAgIAlTeXN0
ZW0ub3V0LnByaW50bG4oU3RyaW5nLmZvcm1hdCgiPj4+W0FwcFBsYXQgR2F0ZXdheV0gJXMiLCBt
ZXNzYWdlKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBQZXJtaXNzaW9ucyBmb3IgdGhvc2Ugc2Vy
dmljZXMgdGhhdCBhcmUgdXNlZCBieSBXbUFwcFBsYXQKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0
aWMgdm9pZCBpbml0U2VydmljZUFDTHMoU3RyaW5nW10gYXBTZXJ2aWNlcykgewoKCQlpZiAoIGFw
U2VydmljZXMgIT0gbnVsbCkgewoJCQlmb3IgKCBTdHJpbmcgYXBTZXJ2aWNlIDogYXBTZXJ2aWNl
cykgewoJCSAgICAJdHJ5IHsKCQkgICAgCQlTdHJpbmcgck1zZyA9IHVwZGF0ZUFDTHNGb3JTZXJ2
aWNlKCBhcFNlcnZpY2UsCgkgICAgICAgICAgICAJCUFDTE1hbmFnZXIuV0VCTV9BRE1JTklTVFJB
VE9SU19BQ0wsIC8vIGJyb3dzZQoJICAgICAgICAgICAgCQlBQ0xNYW5hZ2VyLklOVEVSTkFMX0FD
TCwgIC8vIGV4ZWN1dGUKCSAgICAgICAgICAgIAkJbnVsbCwgLypBQ0xNYW5hZ2VyLldFQk1fSU5U
RVJOQUxERVZfQUNMLCovIC8vIHJlYWQKCSAgICAgICAgICAgIAkJbnVsbCwgLypBQ0xNYW5hZ2Vy
LldFQk1fSU5URVJOQUxERVZfQUNMLCovIC8vIHdyaXRlCgkgICAgICAgICAgICAJCWZhbHNlKTsK
CgoJCSAgICAJfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKCQkgICAgCQlTZXJ2ZXIubG9nRXJyb3Io
ZSk7CgkJICAgIAl9CgkJCX0KCQl9CiAgICB9Cgo=</value>
  <value name="encodeutf8">true</value>
  <array name="imports" type="value" depth="1">
    <value>com.wm.data.*</value>
    <value>com.wm.app.b2b.server.Manifest</value>
    <value>com.wm.app.b2b.server.Server</value>
    <value>com.wm.app.b2b.server.BaseService</value>
    <value>com.wm.app.b2b.server.Service</value>
    <value>com.wm.app.b2b.server.ServiceException</value>
    <value>com.wm.app.b2b.util.ServerIf</value>
    <value>com.wm.app.b2b.server.Package</value>
    <value>com.wm.app.b2b.server.PackageManager</value>
    <value>com.wm.app.b2b.server.PackageStore</value>
    <value>com.wm.app.b2b.server.ACLManager</value>
    <value>com.softwareag.util.IDataMap</value>
    <value>com.wm.lang.ns.NSInterface</value>
    <value>com.wm.lang.ns.NSName</value>
    <value>com.wm.lang.ns.NSNode</value>
    <value>com.wm.lang.ns.NSRecord</value>
    <value>com.wm.lang.ns.NSService</value>
    <value>com.wm.lang.ns.NSSignature</value>
    <value>com.wm.util.Name</value>
    <value>com.softwareag.applatform.pls.is.osgi.MethodMetadataImpl</value>
    <value>com.softwareag.applatform.pls.is.osgi.Metadata2Signatures</value>
    <value>com.softwareag.applatform.pls.is.osgi.OsgiService</value>
    <value>java.util.ArrayList</value>
    <value>java.util.Arrays</value>
  </array>
</Values>
